---
import teamData from '../data/team.json';
import doctorsData from '../data/doctors.json';
import drQuellhorst from '../assets/images/doctors/dr-quellhorst.png';
import drZaino from '../assets/images/doctors/dr-zaino.png';
import angela from '../assets/images/team/angela.png';
import lauren from '../assets/images/team/lauren.png';
import catherine from '../assets/images/team/catherine.png';
import paige from '../assets/images/team/paige.png';
import tiffany from '../assets/images/team/tiffany.png';
import rachel from '../assets/images/team/rachel.png';
import becky from '../assets/images/team/becky.png';
import nora from '../assets/images/team/nora.png';
import keristin from '../assets/images/team/keristin.png';

const imageMap: Record<string, any> = {
  '/src/assets/images/doctors/dr-quellhorst.png': drQuellhorst,
  '/src/assets/images/doctors/dr-zaino.png': drZaino,
  '/src/assets/images/team/angela.png': angela,
  '/src/assets/images/team/lauren.png': lauren,
  '/src/assets/images/team/catherine.png': catherine,
  '/src/assets/images/team/paige.png': paige,
  '/src/assets/images/team/tiffany.png': tiffany,
  '/src/assets/images/team/rachel.png': rachel,
  '/src/assets/images/team/becky.png': becky,
  '/src/assets/images/team/nora.png': nora,
  '/src/assets/images/team/keristin.png': keristin,
};

interface TeamMember {
  id: string;
  name: string;
  title: string;
  image: string;
}

const doctors: TeamMember[] = doctorsData;
const staff: TeamMember[] = teamData;
const allTeam = [...doctors, ...staff];
---

<section class="py-16 bg-bg-main">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    {/* Header */}
    <div class="mb-12 text-center">
      <h2 class="text-3xl md:text-4xl font-bold text-brand-deep mb-4" style="font-family: var(--font-family-display);">
        Our Team
      </h2>
      <p class="text-center text-gray-600 mb-12 max-w-2xl mx-auto">
        These are the friendly faces you'll see at every visit.
      </p>
    </div>

    {/* Content Layout: Team Grid on Left, Facebook Feed on Right */}
    <div class="flex flex-col lg:flex-row gap-12 items-start">
      {/* Team Grid - 2 columns */}
      <div class="flex-1">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-12 md:gap-16">
          {allTeam.map((member) => (
            <div key={member.id} class="flex flex-col items-center">
              {/* Team member photo with circle-face effect */}
              <div class="inline-block rounded-full bg-bg-main-darker w-52 h-52 mb-6 mt-[40px]">
                <div
                  class="inline-block w-52 h-[248px] -mt-[40px] bg-none bg-no-repeat bg-center bg-bottom"
                  style={`background-image: url(${imageMap[member.image]?.src || member.image}); background-size: cover; border-radius: 0 0 104px 104px;`}
                >
                </div>
              </div>

              {/* Name and title */}
              <div class="text-center">
                <h3 class="text-2xl font-bold text-brand-deep mb-1">
                  {member.name}
                </h3>
                <p class="text-lg text-text-dark/70">
                  {member.title}
                </p>
              </div>
            </div>
          ))}
        </div>
      </div>

      {/* Facebook Feed */}
      <div class="w-full lg:w-[500px] flex-shrink-0">
        <div class="w-full h-full">
          <div id="fb-root"></div>
          <div
            class="fb-page w-full"
            data-href="https://www.facebook.com/crosscreeksdental"
            data-tabs="timeline"
            data-width="500"
            data-height="2000"
            data-small-header="false"
            data-adapt-container-width="true"
            data-hide-cover="false"
            data-show-facepile="true"
            data-lazy="false"
          >
            <blockquote cite="https://www.facebook.com/crosscreeksdental" class="fb-xfbml-parse-ignore">
              <a href="https://www.facebook.com/crosscreeksdental">Cross Creeks Dental</a>
            </blockquote>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<script>
  // Load Facebook SDK and force refresh
  (function(d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
    js = d.createElement(s); js.id = id;
    js.src = 'https://connect.facebook.net/en_US/sdk.js#xfbml=1&version=v18.0';
    fjs.parentNode.insertBefore(js, fjs);
  }(document, 'script', 'facebook-jssdk'));

  // Force Facebook to reparse the page when loaded
  window.addEventListener('load', function() {
    if (window.FB) {
      window.FB.XFBML.parse();
    }
  });
</script>
